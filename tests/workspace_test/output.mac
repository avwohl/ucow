; Generated by ucow

	.Z80

	CSEG

	JP	_main

	INCLUDE	'runtime.mac'


; Subroutine process_a
process_a:
	LD	HL,2
	ADD	HL,SP
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	LD	(v_n),HL
	PUSH	HL
	EX	DE,HL
	POP	HL
	ADD	HL,DE
	LD	(v_local_a2),HL
	EX	DE,HL
	LD	HL,(v_n)
	ADD	HL,DE
	LD	(v_local_a3),HL
	LD	DE,v_buffer_a
	LD	A,L
	LD	(DE),A
	RET

; Subroutine process_b
process_b:
	LD	HL,2
	ADD	HL,SP
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	LD	(v_n),HL
	LD	DE,5
	ADD	HL,DE
	LD	(v_local_b2),HL
	EX	DE,HL
	LD	HL,(v_n)
	CALL	_mul16
	LD	(v_local_b3),HL
	LD	DE,v_buffer_b
	LD	A,L
	LD	(DE),A
	RET

; Subroutine helper
helper:
	LD	HL,2
	ADD	HL,SP
	LD	E,(HL)
	INC	HL
	LD	D,(HL)
	EX	DE,HL
	LD	(v_x),HL
	INC	HL
	LD	(v_temp),HL
	LD	(v_result),HL
	RET

; Main program
_main:
	LD	HL,0
	LD	(v_global_counter),HL
	LD	HL,10
	PUSH	HL
	CALL	process_a
	POP	DE
	LD	HL,20
	PUSH	HL
	CALL	process_b
	POP	DE
	LD	HL,STR1
	PUSH	HL
	CALL	print
	POP	DE
	JP	0

; String literals
STR1:	DB	68,111,110,101,13,10,0
; Initialized data

	DSEG
; Variables
_wsbase:
	DS	110
; Variable addresses (workspace-optimized)
v_global_counter	EQU	_wsbase+0
v_n	EQU	_wsbase+2
v_local_a1	EQU	_wsbase+4
v_local_a2	EQU	_wsbase+6
v_local_a3	EQU	_wsbase+8
v_buffer_a	EQU	_wsbase+10
v_local_b1	EQU	_wsbase+4
v_local_b2	EQU	_wsbase+6
v_local_b3	EQU	_wsbase+8
v_buffer_b	EQU	_wsbase+10
v_x	EQU	_wsbase+2
v_result	EQU	_wsbase+4
v_temp	EQU	_wsbase+6

	END